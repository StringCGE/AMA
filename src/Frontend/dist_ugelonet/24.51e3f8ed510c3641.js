"use strict";(self.webpackChunkFundacion=self.webpackChunkFundacion||[]).push([[24],{1117:(b,C,s)=>{s.d(C,{n:()=>y});var t=s(9212),p=s(6814);function f(a,g){if(1&a&&(t.TgZ(0,"small"),t._uU(1),t.qZA()),2&a){const l=t.oxw().$implicit;t.xp6(1),t.Oqu(l.value)}}function v(a,g){if(1&a&&(t.ynx(0),t.YNc(1,f,2,1,"small",3),t._UZ(2,"br"),t.BQk()),2&a){const l=g.$implicit,d=t.oxw(2);t.xp6(1),t.Q6J("ngIf",d.control.hasError(l.key))}}function m(a,g){if(1&a&&(t.TgZ(0,"div",1),t.YNc(1,v,3,1,"ng-container",2),t.ALo(2,"keyvalue"),t.qZA()),2&a){const l=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,l.getErrors()))}}let y=(()=>{class a{getErrors(){const l=this.control?.errors,d={required:"El campo es requerido",minlength:this.minLength?`El valor debe tener al menos ${this.minLength} caracteres`:"El valor es demasiado corto",maxlength:this.maxLength?`El valor debe tener como m\xe1ximo ${this.maxLength} caracteres`:"El valor es demasiado largo",pattern:this.pattern?`El valor debe contener solo ${this.pattern}`:"El valor del campo no es correcto",email:"El campo debe ser de formato email"},u={};if(l)for(const _ of Object.keys(l))d[_]&&(u[_]=d[_]);return u}static#t=this.\u0275fac=function(d){return new(d||a)};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-error-display"]],inputs:{control:"control",minLength:"minLength",maxLength:"maxLength",isNumeric:"isNumeric",pattern:"pattern"},decls:1,vars:1,consts:[["class","text-danger",4,"ngIf"],[1,"text-danger"],[4,"ngFor","ngForOf"],[4,"ngIf"]],template:function(d,u){1&d&&t.YNc(0,m,3,3,"div",0),2&d&&t.Q6J("ngIf",u.control&&u.control.invalid&&(u.control.dirty||u.control.touched))},dependencies:[p.sg,p.O5,p.Nd]})}return a})()},7768:(b,C,s)=>{s.d(C,{J:()=>F});var t=s(9212),p=s(6223),f=s(5118),v=s(6897),m=s(7398),y=s(553),a=s(8967),g=s(9862),l=s(701);const d=y.N.serverAma;let u=(()=>{class i{constructor(e,o){this._http=e,this.tools=o,this.URL=d+"api/Brigada"}getPaginated(e){const o=this.tools.getHttpParams(e);return this._http.get(this.URL,{params:o}).pipe((0,m.U)(n=>{const[r,h]=a.w;if(null===n)throw new Error(`${r.ERRORSRV}||${h.MSGDATAVACIOSRV}`);if(!n.success)throw new Error(`${n.statusCode}||${n.message}`);return n}))}static#t=this.\u0275fac=function(o){return new(o||i)(t.LFG(g.eN),t.LFG(l.G))};static#e=this.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var _=s(5219),w=s(9926),D=s(9250);function T(i,P){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"th",4)(2,"div",5)(3,"div",6),t._uU(4," N\xb0 Brigada "),t._UZ(5,"p-sortIcon",7),t.qZA()(),t.TgZ(6,"div",8)(7,"p-columnFilter",9),t.NdJ("paste",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.onKeyDownLettersAndNumbers(n))})("keypress",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.onKeyDownLettersAndNumbers(n))})("input",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.onInput(n))}),t.qZA()()(),t.TgZ(8,"th",10)(9,"div",5)(10,"div",6),t._uU(11," Nombre Brigada \xa0 \xa0 "),t._UZ(12,"p-sortIcon",7),t.qZA()(),t.TgZ(13,"div",8)(14,"p-columnFilter",11),t.NdJ("paste",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.onKeyDownLettersAndNumbers(n))})("keypress",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.onKeyDownLettersAndNumbers(n))})("input",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.onInput(n))}),t.qZA()()()()}2&i&&(t.xp6(7),t.Q6J("showMenu",!1),t.xp6(7),t.Q6J("showMenu",!1))}function N(i,P){if(1&i){const e=t.EpF();t.TgZ(0,"tr",12),t.NdJ("dblclick",function(n){const h=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.onRowDblClick(n,h))}),t.TgZ(1,"td",13),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA()()}if(2&i){const e=P.$implicit;t.Q6J("pSelectableRow",e),t.xp6(2),t.Oqu(e.id),t.xp6(2),t.Oqu(e.name)}}function O(i,P){1&i&&(t.TgZ(0,"tr")(1,"td",14),t._uU(2,"No existen registros."),t.qZA()())}let B=(()=>{class i{constructor(e,o,n,r,h){this.BrigadeDialogService=e,this.ref=o,this.config=n,this.messageService=r,this.textValidatorService=h,this.isFirstLoad=!0,this.loading=!1,this.totalRows=0,this.lsBrigade=[],this.onKeyDownLetters=c=>this.textValidatorService.validateOnlyLetters(c),this.onKeyDownLettersAndNumbers=c=>this.textValidatorService.validateOnlyLettersAndNumbers(c),this.onInput=c=>this.textValidatorService.changeUppercase(c)}ngOnInit(){this.getBrigadeData({offset:0,take:10,sort:""})}loadBrigadeLazy(e){if(this.isFirstLoad)return void(this.isFirstLoad=!1);let o={offset:e.first,take:e.rows,sort:""},n=e.sortField,h="";if(null!=n){let x=[];x.push({selector:n,desc:1!==e.sortOrder}),h=JSON.stringify(x)}o.sort=h;let c=e.filters;c.hasOwnProperty("name")&&(o.name=c.name.value),c.hasOwnProperty("id")&&(o.id=c.id.value),this.getBrigadeData(o)}getBrigadeData(e){this.loading=!0,this.BrigadeDialogService.getPaginated(e).subscribe({next:o=>{let n=o;n&&(this.totalRows=n.length,this.lsBrigade=n.result)},error:o=>{this.loading=!1},complete:()=>{this.loading=!1}})}onRowDblClick(e,o){if(o){let r={code:o.id,description:(o.id?o.id:"")+" - "+(o.name?o.name:""),dataSerialize:JSON.stringify(o)};this.ref.close(r)}}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(u),t.Y36(f.E7),t.Y36(f.S),t.Y36(_.ez),t.Y36(w.y))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-brigade-dialog"]],decls:4,vars:6,consts:[["scrollDirection","vertical","currentPageReportTemplate","{last} de {totalRecords}","selectionMode","single",1,"table",3,"value","paginator","lazy","rows","totalRecords","showCurrentPageReport","onLazyLoad"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pSortableColumn","id"],[1,"col-12","mb-1"],[1,"text-center","flex","justify-content-center","align-items-center"],["field","code"],[1,"col-12"],["type","text","field","id","matchMode","contains",3,"showMenu","paste","keypress","input"],["pSortableColumn","name"],["type","text","field","name","matchMode","contains",3,"showMenu","paste","keypress","input"],[3,"pSelectableRow","dblclick"],[1,"text-center"],["colspan","2"]],template:function(o,n){1&o&&(t.TgZ(0,"p-table",0),t.NdJ("onLazyLoad",function(h){return n.loadBrigadeLazy(h)}),t.YNc(1,T,15,2,"ng-template",1)(2,N,5,3,"ng-template",2)(3,O,3,0,"ng-template",3),t.qZA()),2&o&&t.Q6J("value",n.lsBrigade)("paginator",!0)("lazy",!0)("rows",10)("totalRecords",n.totalRows)("showCurrentPageReport",!0)},dependencies:[_.jx,D.iA,D.lQ,D.Ei,D.fz,D.xl]})}return i})(),L=(()=>{class i{constructor(){this.COMPONETS={PersonDialogComponet:v.l,BrigadeDialogComponent:B}}get(e){return this.COMPONETS[e]}static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var A=s(6814),I=s(707),M=s(3965);const E=()=>({width:"100%","max-height":"40px","border-right-style":"none"});let F=(()=>{class i{constructor(e,o){this.dialogService=e,this.datasetComponentService=o,this.disabledProp=!1,this.itemChanged=new t.vpe,this.items=[],this.disabledPropControl=!1,this.classButtonControl="",this.items=[],this.disabledPropControl=this.disabledProp,this.classButtonControl=this.disabledPropControl?"background-color: rgb(122, 116, 182); position: absolute; right: 0px;":"background-color: rgb(34, 25, 135); position: absolute; right: 0px;",this.formItemDropdownGroup=new p.cw({itemFormControl:new p.NI({value:null,disabled:this.disabledProp})})}ngOnChanges(e){for(let o in e)"itemsProp"===o&&(this.items=e[o].currentValue,this.items.length>0?this.formItemDropdownGroup.get("itemFormControl")?.patchValue(this.items[0].code):this.formItemDropdownGroup.get("itemFormControl")?.patchValue(null)),"disabledProp"===o&&(this.disabledProp=e[o].currentValue,this.disabledProp?this.formItemDropdownGroup.get("itemFormControl")?.disable():this.formItemDropdownGroup.get("itemFormControl")?.enable(),this.disabledPropControl=this.disabledProp)}ngOnDestroy(){this.ref&&this.ref.close()}openDialog(){this.disabledPropControl||this.openDialogProcess()}clearItems(){this.clearItemsProcess()}openDialogProcess(){this.ref=this.dialogService.open(this.datasetComponentService.get(this.confProp.NameComponent),{width:this.confProp.width??"auto",height:this.confProp.height??"auto",header:this.title,contentStyle:{"min-height":"500px","min-width":"500px"},data:{dataToDialogArr:this.dataToDialog.Params,dataFilter:this.dataToDialog.dataFilter}}),this.ref.onClose.subscribe(e=>{e&&(this.items=[],e.description=e.description?.toUpperCase(),this.items.push(e),this.formItemDropdownGroup.get("itemFormControl")?.patchValue(e.code),this.itemChanged.emit({conf:{Id:this.confProp.Id,Name:this.confProp.Name,Tooltip:this.confProp.Tooltip,NameComponent:this.confProp.NameComponent,Dataset:this.confProp.Dataset},data:{code:e.code,description:e.description,dataSerialize:e.dataSerialize}}))})}clearItemsProcess(){this.items=[],this.itemChanged.emit({conf:{Id:this.confProp.Id,Name:this.confProp.Name,Tooltip:this.confProp.Tooltip,NameComponent:this.confProp.NameComponent,Dataset:this.confProp.Dataset},data:{code:"",description:"",dataSerialize:""}})}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(f.xA),t.Y36(L))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-dropdown"]],inputs:{dataToDialog:"dataToDialog",className:"className",title:"title",confProp:"confProp",itemsProp:"itemsProp",disabledProp:"disabledProp"},outputs:{itemChanged:"itemChanged"},features:[t.TTD],decls:4,vars:11,consts:[[1,"p-inputgroup",2,"position","relative",3,"formGroup","click"],["emptyMessage","No hay registros","placeholder","Seleccione una opci\xf3n","formControlName","itemFormControl","optionLabel","description","optionValue","code","dropdownIcon","none",3,"ngClass","options","showClear","readonly","onClear"],["type","button","pButton","",1,"btn","btn-info","btn-search-control",3,"disabled"],[1,"pi","pi-search"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0),t.NdJ("click",function(){return n.openDialog()}),t.TgZ(1,"p-dropdown",1),t.NdJ("onClear",function(){return n.clearItems()}),t.qZA(),t.TgZ(2,"button",2),t._UZ(3,"i",3),t.qZA()()),2&o&&(t.Q6J("formGroup",n.formItemDropdownGroup),t.xp6(1),t.Akn(t.DdM(10,E)),t.Q6J("ngClass",n.className)("options",n.items)("showClear",!0)("readonly",!0),t.xp6(1),t.Akn(n.classButtonControl),t.Q6J("disabled",n.disabledPropControl))},dependencies:[A.mk,p.JJ,p.JL,p.sg,p.u,I.Hq,M.Lt],styles:[".btn-search-control[_ngcontent-%COMP%]{height:40px;width:40px}.p-element.p-dropdown-label.p-inputtext.p-placeholder.ng-star-inserted[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-top:-5px!important}"]})}return i})()},9358:(b,C,s)=>{s.d(C,{O:()=>v});var t=s(9212),p=s(6814);function f(m,y){1&m&&(t.TgZ(0,"div",1)(1,"div",2),t._UZ(2,"div",3),t.qZA()())}let v=(()=>{class m{constructor(){}static#t=this.\u0275fac=function(g){return new(g||m)};static#e=this.\u0275cmp=t.Xpm({type:m,selectors:[["app-spinner"]],inputs:{visible:"visible"},decls:1,vars:1,consts:[["class","custom-spinner",4,"ngIf"],[1,"custom-spinner"],[1,"spinner-container"],[1,"spinner-circle"]],template:function(g,l){1&g&&t.YNc(0,f,3,0,"div",0),2&g&&t.Q6J("ngIf",l.visible)},dependencies:[p.O5],styles:[".custom-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}.spinner-container[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;border:4px solid #3498db;border-top:4px solid transparent;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}"]})}return m})()}}]);