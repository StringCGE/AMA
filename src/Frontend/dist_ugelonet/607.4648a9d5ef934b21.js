"use strict";(self.webpackChunkFundacion=self.webpackChunkFundacion||[]).push([[607],{5607:(b,h,o)=>{o.r(h),o.d(h,{UserModule:()=>E});var r=o(6223),u=o(6814),f=o(5959),p=o(6306),l=o(2096),t=o(9212),d=o(5118),m=o(9721),g=o(553),C=o(9862),U=o(701),T=o(5175);let Z=(()=>{class i{constructor(e,s,n){this.http=e,this.tools=s,this.authService=n}getUsers(e){return this.http.get(`${g.N.serverAma}api/User`,{params:e})}Create(e){return this.http.post(`${g.N.serverAma}api/User`,e)}Put(e){return this.http.put(`${g.N.serverAma}api/User/${e.id}`,e)}static#t=this.\u0275fac=function(s){return new(s||i)(t.LFG(C.eN),t.LFG(U.G),t.LFG(T.e))};static#e=this.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function A(i,c){1&i&&(t.TgZ(0,"div",15)(1,"div",3)(2,"strong")(3,"small")(4,"code"),t._uU(5,"* La contrase\xf1a no se actualizar\xe1 si deja vacia"),t.qZA()()()()())}const F=(i,c)=>({"form-control-plaintext":i,"form-control":c});let _=(()=>{class i{constructor(e,s,n,a){this.ref=e,this.config=s,this.formService=n,this.userService=a,this.isNewUser=!0,this.update=!1,this.label="Crear",this.view=!1}ngOnInit(){this.InitializeData()}InitializeData(){this.update=this.config.data.update,this.view=this.config.data.view,this.update?(this.label="Actualizar",this.buildFormData()):(this.label="Crear",this.buildForm())}closeDialog(){this.ref.close()}buildForm(){this.update?(this.formDataUpdate={email:"",id:0,identification:"",name:"",password:"",status:"A",...this.config.data.user},this.userForm=this.formService.createFormGroup(this.formDataUpdate)):(this.formData={email:"",id:0,identification:"",name:"",password:"",status:"A",...this.config.data.user},this.userForm=this.formService.createFormGroup(this.formData)),this.validator()}validator(){this.userForm.get("identification")?.setValidators([r.kI.required,r.kI.min(8)]),this.userForm.get("name")?.setValidators([r.kI.required,r.kI.min(5)]),this.userForm.get("email")?.setValidators([r.kI.required,r.kI.min(5)]),this.userForm.get("status")?.setValidators([r.kI.required,r.kI.min(5)]),this.update||this.userForm.get("password")?.setValidators([r.kI.required,r.kI.min(4)])}buildFormData(){this.formDataUpdate={email:"",id:0,identification:"",name:"",status:"A",...this.config.data.user},this.userForm=this.formService.createFormGroup(this.formDataUpdate),this.validator()}Save(){this.update&&this.userService.Put(this.userForm.value).pipe((0,p.K)(e=>(0,l.of)())).subscribe(()=>(this.closeDialog(),!0)),this.update||this.userService.Create(this.userForm.value).pipe((0,p.K)(e=>(0,l.of)())).subscribe(()=>(this.closeDialog(),!0))}static#t=this.\u0275fac=function(s){return new(s||i)(t.Y36(d.E7),t.Y36(d.S),t.Y36(m.o),t.Y36(Z))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-user-form"]],inputs:{isNewUser:"isNewUser"},decls:45,vars:9,consts:[[1,"content"],[1,"modal-body"],[3,"formGroup"],[1,"col-12"],[1,"mb-3","row",3,"hidden"],[1,"col-4","col-form-label"],[1,"col"],["type","text","formControlName","id","id","id"],[1,"mb-3","row"],["type","text","formControlName","identification",3,"readonly","ngClass"],["type","text","formControlName","name","formControlName","name","formControlName","name",1,"form-control"],["type","text","formControlName","email","id","email",1,"form-control"],["formControlName","status","id","status",1,"form-control"],["value","A"],["value","I"],[1,"row"],["type","password","formControlName","password","id","password",1,"form-control"],["class","row",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-success",3,"disabled","click"]],template:function(s,n){1&s&&(t.TgZ(0,"div",0)(1,"div",1)(2,"form",2)(3,"div",3)(4,"div",4)(5,"label",5),t._uU(6,"Id:"),t.qZA(),t.TgZ(7,"div",6),t._UZ(8,"input",7),t.qZA()(),t.TgZ(9,"div",8)(10,"label",5),t._uU(11,"Identificaci\xf3n:"),t.qZA(),t.TgZ(12,"div",6),t._UZ(13,"input",9),t.qZA()(),t.TgZ(14,"div",8)(15,"label",5),t._uU(16,"Nombre:"),t.qZA(),t.TgZ(17,"div",6),t._UZ(18,"input",10),t.qZA()(),t.TgZ(19,"div",8)(20,"label",5),t._uU(21,"Email:"),t.qZA(),t.TgZ(22,"div",6),t._UZ(23,"input",11),t.qZA()(),t.TgZ(24,"div",8)(25,"label",5),t._uU(26,"Estado:"),t.qZA(),t.TgZ(27,"div",6)(28,"select",12)(29,"option",13),t._uU(30,"Activo"),t.qZA(),t.TgZ(31,"option",14),t._uU(32,"Eliminado"),t.qZA()()()(),t.TgZ(33,"div",15)(34,"label",5),t._uU(35,"Contrase\xf1a *"),t.qZA(),t.TgZ(36,"div",6),t._UZ(37,"input",16),t.qZA()(),t.YNc(38,A,6,0,"div",17),t.qZA()()(),t.TgZ(39,"div",18)(40,"button",19),t.NdJ("click",function(){return n.closeDialog()}),t._uU(41,"Cerrar"),t.qZA(),t._uU(42," \xa0\xa0 "),t.TgZ(43,"button",20),t.NdJ("click",function(){return n.Save()}),t._uU(44,"Guardar"),t.qZA()()()),2&s&&(t.xp6(2),t.Q6J("formGroup",n.userForm),t.xp6(2),t.Q6J("hidden",!0),t.xp6(9),t.Q6J("readonly",!n.isNewUser)("ngClass",t.WLB(6,F,!n.isNewUser,n.isNewUser)),t.xp6(25),t.Q6J("ngIf",n.update),t.xp6(5),t.Q6J("disabled",!n.userForm.valid))},dependencies:[u.mk,u.O5,r._Y,r.YN,r.Kr,r.Fj,r.EJ,r.JJ,r.JL,r.sg,r.u]})}return i})();var v=o(5219),x=o(9358),y=o(3904),N=o(9250);function I(i,c){if(1&i&&(t.ynx(0),t._UZ(1,"app-spinner",2),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("visible",e.loading)}}function S(i,c){1&i&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"Identificaci\xf3n"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Nombre"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Email"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Estado"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Acciones"),t.qZA()())}function q(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td")(10,"button",6),t.NdJ("click",function(){const a=t.CHM(e).$implicit,Y=t.oxw(2);return t.KtG(Y.Edit(a))}),t._UZ(11,"i",7),t.qZA()()()}if(2&i){const e=c.$implicit;t.xp6(2),t.Oqu(e.identification),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.email),t.xp6(2),t.Oqu(e.status)}}function w(i,c){if(1&i&&(t.TgZ(0,"p-table",3),t.YNc(1,S,11,0,"ng-template",4)(2,q,12,4,"ng-template",5),t.qZA(),t._UZ(3,"p-confirmDialog")),2&i){const e=t.oxw();t.Q6J("value",e.users)("paginator",!1)("rows",10)("totalRecords",1)("lazy",!1)("showCurrentPageReport",!0)}}let M=(()=>{class i{constructor(e,s,n,a){this.userService=e,this.dialogService=s,this.confirmationService=n,this.messageService=a,this.users=[],this.filter={status:"",identification:""},this.loading=!0}ngOnInit(){this.loading=!0,this.getUsers()}getUsers(){this.userService.getUsers(this.filter).pipe((0,p.K)(e=>(this.loading=!1,(0,l.of)()))).subscribe(e=>{this.users=e,this.loading=!1})}applyFilter(){this.getUsers()}Edit(e){this.dialogService.open(_,{header:"Modificar usuario",width:"auto",height:"auto",data:{update:!0,user:e},contentStyle:{"max-height":"500px","min-width":"500px"},baseZIndex:1e4}).onClose.subscribe(s=>{this.getUsers()})}Delete(e){this.confirmationService.confirm({message:"Se eliminar\xe1 el usuario 999999999999999 - System",header:"\xbfEst\xe1 seguro que quiere eliminar el usuario?",icon:"pi pi-exclamation-triangle",closeOnEscape:!0,acceptButtonStyleClass:"btn btn-success ml-2",rejectButtonStyleClass:"btn btn-danger",acceptLabel:"No",rejectLabel:"Si, Eliminar",accept:()=>{console.log("no eliminado")},reject:()=>{console.log("elimiado")}})}static#t=this.\u0275fac=function(s){return new(s||i)(t.Y36(Z),t.Y36(d.xA),t.Y36(v.YP),t.Y36(v.ez))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-user-list-detail"]],inputs:{users:"users"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["content",""],[3,"visible"],["scrollDirection","vertical","currentPageReportTemplate","Mostrando {last} de {totalRecords} registros","selectionMode","single",1,"table","table-sm",3,"value","paginator","rows","totalRecords","lazy","showCurrentPageReport"],["pTemplate","header"],["pTemplate","body"],[1,"btn","btn-warning",3,"click"],[1,"fas","fa-edit"]],template:function(s,n){if(1&s&&t.YNc(0,I,2,1,"ng-container",0)(1,w,4,6,"ng-template",null,1,t.W1O),2&s){const a=t.MAs(2);t.Q6J("ngIf",n.loading)("ngIfElse",a)}},dependencies:[u.O5,x.O,v.jx,y.Q,N.iA]})}return i})();function D(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",19)(2,"p",20),t._uU(3,"Identificaci\xf3n"),t.qZA(),t.TgZ(4,"input",21),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.filter.identification=n)}),t.qZA()(),t.TgZ(5,"div",19)(6,"p",20),t._uU(7,"Nombre"),t.qZA(),t.TgZ(8,"input",22),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.filter.status=n)}),t.qZA()(),t.TgZ(9,"div",19),t._UZ(10,"br"),t.TgZ(11,"button",23),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.applyFilter())}),t._UZ(12,"i",24),t._uU(13," Buscar"),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(4),t.Q6J("ngModel",e.filter.identification),t.xp6(4),t.Q6J("ngModel",e.filter.status)}}const J=[{path:"",component:(()=>{class i{constructor(e,s,n,a){this.userService=e,this.dialogService=s,this.tools=n,this.cdr=a,this.users=[],this.filter={status:"",identification:""},this.openFilterPanel=!0}ngOnInit(){}getUsers(){this.userService.getUsers(this.filter).subscribe(e=>{this.users=e,console.log(e),this.cdr.detectChanges()})}applyFilter(){this.getUsers()}New(){this.dialogService.open(_,{header:"Nuevo usuario",width:"auto",height:"auto",data:{update:!1},contentStyle:{"max-height":"500px","min-width":"500px"},baseZIndex:1e4}).onClose.subscribe(e=>{this.getUsers()})}openCloseFilter(){this.openFilterPanel=!this.openFilterPanel}static#t=this.\u0275fac=function(s){return new(s||i)(t.Y36(Z),t.Y36(d.xA),t.Y36(U.G),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-user-list"]],decls:28,vars:2,consts:[[1,"content-header"],[1,"p-1"],[1,"container-fluid"],[1,"row"],[1,"col-sm-6"],[1,"breadcrumb","float-sm-left"],[1,"breadcrumb-item"],["href","javascript:void();"],[1,"breadcrumb-item","active"],[1,"float-right"],[1,"btn","btn-success",3,"click"],[1,"fas","fa-plus"],[1,"content"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-body"],["class","row",4,"ngIf"],[3,"users"],[1,"mb-3","col-auto"],[1,"form-label"],["type","text","id","identification",1,"form-control",3,"ngModel","ngModelChange"],["type","text","id","status",1,"form-control",3,"ngModel","ngModelChange"],[1,"mt-1","btn","btn-primary",3,"click"],[1,"fas","fa-search"]],template:function(s,n){1&s&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"ol",5)(6,"li",6)(7,"a",7),t._uU(8,"Inicio"),t.qZA()(),t.TgZ(9,"li",8),t._uU(10,"Configuraciones"),t.qZA(),t.TgZ(11,"li",8),t._uU(12,"Usuarios"),t.qZA()()(),t.TgZ(13,"div",4)(14,"div",9),t._uU(15," \xa0\xa0 "),t.TgZ(16,"button",10),t.NdJ("click",function(){return n.New()}),t._UZ(17,"i",11),t._uU(18," Agregar"),t.qZA()()()()()()(),t.TgZ(19,"div",12)(20,"div",2)(21,"div",13)(22,"div",14)(23,"h3",15),t._uU(24,"Usuarios"),t.qZA()(),t.TgZ(25,"div",16),t.YNc(26,D,14,2,"div",17),t._UZ(27,"app-user-list-detail",18),t.qZA()()()()),2&s&&(t.xp6(26),t.Q6J("ngIf",n.openFilterPanel),t.xp6(1),t.Q6J("users",n.users))},dependencies:[u.O5,r.Fj,r.JJ,r.On,M]})}return i})()}];let L=(()=>{class i{static#t=this.\u0275fac=function(s){return new(s||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[f.Bz.forChild(J),f.Bz]})}return i})();var O=o(2580);let E=(()=>{class i{static#t=this.\u0275fac=function(s){return new(s||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({providers:[v.YP],imports:[u.ez,r.u5,O.m,L]})}return i})()},9358:(b,h,o)=>{o.d(h,{O:()=>p});var r=o(9212),u=o(6814);function f(l,t){1&l&&(r.TgZ(0,"div",1)(1,"div",2),r._UZ(2,"div",3),r.qZA()())}let p=(()=>{class l{constructor(){}static#t=this.\u0275fac=function(m){return new(m||l)};static#e=this.\u0275cmp=r.Xpm({type:l,selectors:[["app-spinner"]],inputs:{visible:"visible"},decls:1,vars:1,consts:[["class","custom-spinner",4,"ngIf"],[1,"custom-spinner"],[1,"spinner-container"],[1,"spinner-circle"]],template:function(m,g){1&m&&r.YNc(0,f,3,0,"div",0),2&m&&r.Q6J("ngIf",g.visible)},dependencies:[u.O5],styles:[".custom-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}.spinner-container[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;border:4px solid #3498db;border-top:4px solid transparent;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}"]})}return l})()}}]);