"use strict";(self.webpackChunkFundacion=self.webpackChunkFundacion||[]).push([[275],{3275:(j,h,n)=>{n.r(h),n.d(h,{VoluntarioModule:()=>R});var f=n(6814),b=n(5959),a=n(6223),p=n(7573),t=n(9212),Z=n(9862),v=n(6306),y=n(8504),q=n(553);let _=(()=>{class i{constructor(o){this.http=o,this.apiUrl=q.N.serverAma+"api/volunteer"}getVoluntarioList(){return this.http.get(this.apiUrl).pipe((0,v.K)(o=>(console.error("Error al obtener la lista de donantes:",o),(0,y._)(o))))}postVoluntario(o){return this.http.post("assets/voluntario.json",o).pipe((0,v.K)(r=>{throw console.error("Error al agregar el voluntario:",r),r}))}updateVoluntario(o,e){return this.http.put(`${this.apiUrl}/${o}`,e).pipe((0,v.K)(l=>{throw console.error("Error al actualizar el voluntario:",l),l}))}deleteVoluntario(o){return this.http.delete(`${this.apiUrl}/${o}`)}static#t=this.\u0275fac=function(e){return new(e||i)(t.LFG(Z.eN))};static#o=this.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var u=n(5219),T=n(1312);function V(i,m){if(1&i){const o=t.EpF();t.TgZ(0,"div",2)(1,"form",3),t.NdJ("ngSubmit",function(){t.CHM(o);const r=t.oxw();return t.KtG(r.guardarVoluntario())}),t.TgZ(2,"div",4)(3,"label",5),t._uU(4,"Identificaci\xf3n"),t.qZA(),t._UZ(5,"input",6),t.TgZ(6,"div",7),t._uU(7,"Por favor, ingrese una identificaci\xf3n."),t.qZA()(),t.TgZ(8,"div",8)(9,"div",9)(10,"div",4)(11,"label",10),t._uU(12,"Primer Nombre"),t.qZA(),t._UZ(13,"input",11),t.TgZ(14,"div",7),t._uU(15,"Por favor, ingrese un nombre."),t.qZA()(),t.TgZ(16,"div",4)(17,"label",12),t._uU(18,"Segundo Nombre"),t.qZA(),t._UZ(19,"input",13),t.TgZ(20,"div",7),t._uU(21,"Por favor, ingrese el segundo nombre."),t.qZA()()(),t.TgZ(22,"div",9)(23,"div",4)(24,"label",14),t._uU(25,"Primer Apellido"),t.qZA(),t._UZ(26,"input",15),t.TgZ(27,"div",7),t._uU(28," Por favor, ingrese el primer apellido. "),t.qZA()(),t.TgZ(29,"div",4)(30,"label",16),t._uU(31,"Segundo Apellido"),t.qZA(),t._UZ(32,"input",17),t.TgZ(33,"div",7),t._uU(34," Por favor, ingrese el segundo apellido. "),t.qZA()()()(),t.TgZ(35,"div",8)(36,"div",9)(37,"div",4)(38,"label",18),t._uU(39,"Celular"),t.qZA(),t._UZ(40,"input",19),t.TgZ(41,"div",7),t._uU(42," Por favor, ingrese un n\xfamero de celular v\xe1lido (10 d\xedgitos). "),t.qZA()(),t.TgZ(43,"div",4)(44,"label",20),t._uU(45,"Correo Electr\xf3nico"),t.qZA(),t._UZ(46,"input",21),t.TgZ(47,"div",7),t._uU(48," Por favor, ingrese un correo electr\xf3nico v\xe1lido. "),t.qZA()()(),t.TgZ(49,"div",9)(50,"div",4)(51,"label",22),t._uU(52,"G\xe9nero"),t.qZA(),t._UZ(53,"input",23),t.TgZ(54,"div",7),t._uU(55,"Por favor, ingrese el g\xe9nero."),t.qZA()(),t.TgZ(56,"div",4)(57,"label",24),t._uU(58,"Direcci\xf3n"),t.qZA(),t._UZ(59,"input",25),t.TgZ(60,"div",7),t._uU(61,"Por favor, ingrese la direcci\xf3n."),t.qZA()()()(),t.TgZ(62,"div",8)(63,"div",9)(64,"div",26),t._UZ(65,"input",27),t.TgZ(66,"label",28),t._uU(67,"Disponibilidad"),t.qZA()()()(),t.TgZ(68,"div",29)(69,"button",30),t._uU(70,"Guardar"),t.qZA(),t.TgZ(71,"button",31),t.NdJ("click",function(){t.CHM(o);const r=t.oxw();return t.KtG(r.closeDialog())}),t._uU(72,"Cancelar"),t.qZA()()()()}if(2&i){const o=t.oxw();t.xp6(1),t.Q6J("formGroup",o.voluntarioForm)}}let F=(()=>{class i{constructor(o,e,r,l,s){this.dialogRef=o,this.fb=e,this.http=r,this.voluntarioService=l,this.data=s,this.visible=!0,this.voluntario=s?s.voluntario:null,this.voluntarioForm=this.fb.group({nombre_voluntario:["",a.kI.required],apellido_voluntario:["",a.kI.required],genero_voluntario:["",a.kI.required],direccion_voluntario:["",a.kI.required],celular_voluntario:["",a.kI.pattern(/^\d{10}$/)],email_voluntario:["",a.kI.required],disponibilidad:[!1]}),this.voluntario&&this.voluntarioForm.patchValue({nombre_voluntario:this.voluntario.nombre_voluntario,apellido_voluntario:this.voluntario.apellido_voluntario,genero_voluntario:this.voluntario.genero_voluntario,direccion_voluntario:this.voluntario.direccion_voluntario,celular_voluntario:this.voluntario.celular_voluntario,email_voluntario:this.voluntario.email_voluntario,disponibilidad:this.voluntario.disponibilidad})}ngOnInit(){}guardarVoluntario(){this.voluntarioForm.valid&&(this.voluntario||this.voluntarioService.postVoluntario(this.voluntarioForm.value).subscribe(r=>{this.voluntarioService.getVoluntarioList().subscribe(l=>{},l=>{console.error("Error al obtener datos de voluntarios:",l)}),this.dialogRef.close()},r=>{console.error("Error al guardar el voluntario:",r)}))}showDialog(){this.visible=!0}closeDialog(){this.visible=!1,this.dialogRef.close()}static#t=this.\u0275fac=function(e){return new(e||i)(t.Y36(p.so),t.Y36(a.qu),t.Y36(Z.eN),t.Y36(_),t.Y36(p.WI))};static#o=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-voluntario-create"]],decls:2,vars:2,consts:[["header","Ingresar Nuevo Voluntario",3,"visible","modal","visibleChange"],["pTemplate","content"],[1,"container","bg-white","p-4","rounded"],["novalidate","",1,"needs-validation",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","identificacion",1,"form-label"],["type","text","id","identificacion","formControlName","identificacion","required","",1,"form-control"],[1,"invalid-feedback"],[1,"row"],[1,"col-md-6"],["for","name",1,"form-label"],["type","text","id","name","formControlName","name","required","",1,"form-control"],["for","secondname",1,"form-label"],["type","text","id","secondname","formControlName","secondname","required","",1,"form-control"],["for","lastname",1,"form-label"],["type","text","id","lastname","formControlName","lastname","required","",1,"form-control"],["for","secondlastname",1,"form-label"],["type","text","id","secondlastname","formControlName","secondlastname","required","",1,"form-control"],["for","phone",1,"form-label"],["type","tel","id","phone","formControlName","phone","pattern","\\d{10}",1,"form-control"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email",1,"form-control"],["for","genero_voluntario",1,"form-label"],["type","text","id","genero_voluntario","formControlName","genero_voluntario","required","",1,"form-control"],["for","direccion_voluntario",1,"form-label"],["type","text","id","direccion_voluntario","formControlName","direccion_voluntario","required","",1,"form-control"],[1,"mb-3","form-check"],["type","checkbox","id","disponibilidad","formControlName","disponibilidad",1,"form-check-input"],["for","disponibilidad",1,"form-check-label"],[1,"flex","align-items-center","gap-2"],["type","submit",1,"btn","btn-primary"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(e,r){1&e&&(t.TgZ(0,"p-dialog",0),t.NdJ("visibleChange",function(s){return r.visible=s}),t.YNc(1,V,73,1,"ng-template",1),t.qZA()),2&e&&t.Q6J("visible",r.visible)("modal",!0)},dependencies:[a._Y,a.Fj,a.Wl,a.JJ,a.JL,a.Q7,a.c5,a.sg,a.u,u.jx,T.V]})}return i})();var x=n(595),g=n(707),D=n(1282),N=n(5118),C=n(9250),U=n(4104),A=n(3904);function S(i,m){1&i&&(t.TgZ(0,"tr",12)(1,"th",13),t._uU(2,"ID"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Nombre"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Genero"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Direccion"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Telefono"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Email"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"disponoibilidad"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Acciones"),t.qZA()())}function P(i,m){if(1&i&&(t.TgZ(0,"tr")(1,"td",21)(2,"p"),t._uU(3),t.qZA(),t.TgZ(4,"p"),t._uU(5),t.qZA(),t.TgZ(6,"p"),t._uU(7),t.qZA()()()),2&i){const o=t.oxw().$implicit;t.xp6(3),t.hij("Fecha de Inicio: ",o.startDate,""),t.xp6(2),t.hij("Fecha Final: ",o.endDate,""),t.xp6(2),t.hij("Actividad: ",o.ActividadV,"")}}const E=()=>({"border-radius":"5px","font-size":"10px",height:"2.3rem",width:"2.4rem"});function I(i,m){if(1&i){const o=t.EpF();t.TgZ(0,"tr",12)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td")(16,"div",14)(17,"button",15),t.NdJ("click",function(){const l=t.CHM(o).$implicit,s=t.oxw();return t.KtG(s.verDetalles(l))}),t._UZ(18,"i",16),t.qZA(),t.TgZ(19,"button",17),t.NdJ("click",function(){const l=t.CHM(o).$implicit,s=t.oxw();return t.KtG(s.EditData(l.person))}),t._UZ(20,"i",18),t.qZA(),t.TgZ(21,"p-button",19),t.NdJ("click",function(r){const s=t.CHM(o).$implicit,d=t.oxw();return t.KtG(d.confirmacionEliminar(r,s))}),t.qZA()()()(),t.YNc(22,P,8,3,"tr",20)}if(2&i){const o=m.$implicit;t.xp6(2),t.Oqu(o.personId),t.xp6(2),t.Oqu(o.person.nameCompleted),t.xp6(2),t.Oqu(o.gender),t.xp6(2),t.Oqu(o.address),t.xp6(2),t.Oqu(o.status),t.xp6(2),t.Oqu(null==o.person?null:o.person.email),t.xp6(2),t.Oqu(o.availability?"S\xed":"No"),t.xp6(7),t.Akn(t.DdM(10,E)),t.xp6(1),t.Q6J("ngIf",o.expandido)}}const L=()=>[10,25,50];let w=(()=>{class i{EditData(o){this.NavigateUpdate(o)}constructor(o,e,r,l,s,d){this.voluntarioService=o,this.dialog=e,this.dialogService=r,this.messageService=l,this.confirmationService=s,this.personService=d,this.isUpdateListDetails=!1,this.voluntarioList=[],this.volunteerList=[],this.volunteerListFiltered=[],this.voluntarioListFiltered=[],this.loading=!1,this.listaPersonas=[],this.totalRows=0}ngOnInit(){this.getPerson(),this.voluntarioService.getVoluntarioList().subscribe(o=>{this.voluntarioList=o.result},o=>{console.error("Error al obtener datos:",o)})}handleUpdateListDetails(){this.getPerson()}ngOnChanges(o){console.log(o);for(let e in o)"isUpdateListDetails"===e&&this.handleUpdateListDetails()}getPerson(){this.personFiler={offset:0,take:10,sort:""},this.personService.getAllPersons(this.personFiler).subscribe(o=>{this.listaPersonas=o.result,this.totalRows=o.length,this.loading=!1},o=>{})}NavigateUpdate(o){this.dialogService.open(D.u,{header:"Crear Voluntario",width:"75%",height:"85%",data:{update:!0,person:o},contentStyle:{"max-height":"500px",overflow:"auto"},baseZIndex:1e4}).onClose.subscribe(e=>{e&&this.getPerson()})}loadDetailsLazy(o){let e=o.sortField,l=o.first,s=o.rows,d="";if(null!=e){let c=[];c.push({selector:e,desc:1!==o.sortOrder}),d=JSON.stringify(c)}this.personFiler.sort=d,this.personFiler.take=s,this.personFiler.offset=l,this.personService.getAllPersons(this.personFiler).subscribe(c=>{this.listaPersonas=c.result,this.totalRows=c.length,this.loading=!1},c=>{})}deletePerson(o){this.personService.deletePerson(o).subscribe(e=>{this.getPerson()},e=>{})}verDetalles(o){o.expandido=!o.expandido}eliminarVoluntario(o){this.voluntarioService.deleteVoluntario(o).subscribe(e=>{this.messageService.add({severity:"info",summary:"Confirmado",detail:"Voluntario eliminado exitosamente"})},e=>{this.messageService.add({severity:"error",summary:"Error",detail:"Error al eliminar el Voluntario"})})}confirmacionEliminar(o,e){this.confirmationService.confirm({target:o.target,message:"\xbfDesea eliminar este registro?",header:"Confirmaci\xf3n de Eliminaci\xf3n",icon:"pi pi-info-circle",acceptButtonStyleClass:"p-button-danger p-button-text",rejectButtonStyleClass:"p-button-text p-button-text",acceptIcon:"none",rejectIcon:"none",accept:()=>{console.log("eliminado")},reject:()=>{this.messageService.add({severity:"error",summary:"Rechazado",detail:"Eliminacion Cancelada"})}})}static#t=this.\u0275fac=function(e){return new(e||i)(t.Y36(_),t.Y36(p.uw),t.Y36(N.xA),t.Y36(u.ez),t.Y36(u.YP),t.Y36(x.R))};static#o=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-voluntario-list"]],inputs:{isUpdateListDetails:"isUpdateListDetails"},features:[t.TTD],decls:15,vars:6,consts:[[1,"content"],[1,"container-fluid"],[1,"row","mt-3"],[1,"col-12"],[1,"card"],[1,"card-header"],[1,"mb-0"],[1,"card-body"],[1,"table-responsive"],["dataKey","id","currentPageReportTemplate","Mostrando {first} al {last} de {totalRecords} registros",1,"cell-border","table","table-striped","table-bordered","table-sm",3,"value","rows","showCurrentPageReport","rowsPerPageOptions","paginator"],["pTemplate","header"],["pTemplate","body"],[2,"font-size","14px"],[1,"d-none","d-md-table-cell",2,"width","5%"],[1,"btn-group",2,"display","flex","align-items","center"],[1,"p-element","p-button-rounded","p-button-success","p-button","p-component","p-button-icon-only",2,"margin-right","5px","border-radius","5px","height","2.3rem","width","2.4rem",3,"click"],[1,"pi","pi-eye",2,"font-size","10px"],[1,"p-btn-action","p-button","p-button-rounded","p-button-warning","p-button-icon-only",2,"margin-right","5px","border-radius","5px","height","2.3rem","width","2.4rem",3,"click"],[1,"pi","pi-pencil",2,"font-size","10px"],["icon","pi pi-trash","styleClass","p-btn-action p-button-danger p-button-rounded p-button-icon-only",3,"click"],[4,"ngIf"],["colspan","12"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h5",6),t._uU(7,"Lista de Voluntarios"),t.qZA()(),t.TgZ(8,"div",7)(9,"div",8)(10,"p-table",9),t.YNc(11,S,17,0,"ng-template",10)(12,I,23,11,"ng-template",11),t.qZA(),t._UZ(13,"p-toast")(14,"p-confirmDialog"),t.qZA()()()()()()()),2&e&&(t.xp6(10),t.Q6J("value",r.voluntarioList)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(5,L))("paginator",!0))},dependencies:[f.O5,C.iA,u.jx,g.zx,U.FN,A.Q]})}return i})();const Y=[{path:"",component:(()=>{class i{constructor(o,e){this.dialog=o,this.personDonorService=e,this.visible=!1}showDialog(){this.dialog.open(F,{width:"800px",data:{title:"Crear Voluntario"}})}closeDialog(){this.visible=!1}callNavigateToCreate(){this.personDonorService.triggerCreateDonor()}static#t=this.\u0275fac=function(e){return new(e||i)(t.Y36(p.uw),t.Y36(x.R))};static#o=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-voluntario-index"]],decls:12,vars:0,consts:[[1,"content"],[1,"container-fluid"],[1,"panel","panel-default"],[1,"panel-heading","header-general"],[1,"panel-title"],["role","group","aria-label","Icon Buttons",1,"btn-group"],["pButton","","type","button","icon","pi pi-user","label","Ingresar Nuevo Voluntario",1,"btn","btn-primary","btn-sm",3,"click"],[1,"panel-body"],[1,"contenedor-filtro","row","pb-4"],[1,"donor-list-container"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t._uU(5,"Voluntario"),t.qZA(),t.TgZ(6,"div",5)(7,"button",6),t.NdJ("click",function(){return r.callNavigateToCreate()}),t.qZA()()(),t.TgZ(8,"div",7),t._UZ(9,"div",8),t.TgZ(10,"div",9),t._UZ(11,"app-voluntario-list"),t.qZA()()()()())},dependencies:[g.Hq,w]})}return i})()}];let J=(()=>{class i{static#t=this.\u0275fac=function(e){return new(e||i)};static#o=this.\u0275mod=t.oAB({type:i});static#e=this.\u0275inj=t.cJS({imports:[b.Bz.forChild(Y),b.Bz]})}return i})();var O=n(617),k=n(3965);let R=(()=>{class i{static#t=this.\u0275fac=function(e){return new(e||i)};static#o=this.\u0275mod=t.oAB({type:i});static#e=this.\u0275inj=t.cJS({providers:[u.ez,u.YP],imports:[f.ez,a.UX,J,p.Is,O.Ps,C.U$,g.hJ,k.kW,a.u5,T.S,U.EV,A.D]})}return i})()}}]);